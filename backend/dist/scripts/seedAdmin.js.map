{"version":3,"file":"seedAdmin.js","sourceRoot":"","sources":["../../src/scripts/seedAdmin.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,MAAM,UAAU,CAAC;AAChC,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,IAAI,MAAM,MAAM,CAAC;AACxB,OAAO,EAAE,aAAa,EAAE,MAAM,KAAK,CAAC;AACpC,OAAO,IAAI,MAAM,mBAAmB,CAAC;AAGrC,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AAC/D,MAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,EAAE,CAAC,CAAC;AAE/D,MAAM,SAAS,GAAG,KAAK,IAAI,EAAE;IAC3B,IAAI,CAAC;QACH,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,qCAAqC,CAAC;QAEtG,MAAM,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QAGtC,MAAM,UAAU,GAAG,mBAAmB,CAAC;QACvC,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC,CAAC;QAEhE,IAAI,aAAa,EAAE,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;YAC5C,OAAO;QACT,CAAC;QAKD,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC;YACxB,QAAQ,EAAE,OAAO;YACjB,KAAK,EAAE,UAAU;YACjB,QAAQ,EAAE,OAAO;YACjB,QAAQ,EAAE,OAAO;YACjB,IAAI,EAAE,OAAO;YACb,WAAW,EAAE,eAAe;YAC5B,aAAa,EAAE,eAAe;YAC9B,SAAS,EAAE,UAAU;SACtB,CAAC,CAAC;QAEH,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC,CAAC;QAClD,OAAO,CAAC,GAAG,CAAC,aAAa,UAAU,EAAE,CAAC,CAAC;QACvC,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IAEpC,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;IACjD,CAAC;YAAS,CAAC;QACT,MAAM,QAAQ,CAAC,UAAU,EAAE,CAAC;QAC5B,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;QAC5C,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;AACH,CAAC,CAAC;AAEF,SAAS,EAAE,CAAC","sourcesContent":["import mongoose from 'mongoose';\r\nimport dotenv from 'dotenv';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport User from '../models/User.js';\r\n\r\n// Load environment variables\r\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\r\ndotenv.config({ path: path.resolve(__dirname, '../../.env') });\r\n\r\nconst seedAdmin = async () => {\r\n  try {\r\n    const mongoUri = process.env.MONGO_URI || process.env.DB_URI || 'mongodb://localhost:27017/fayda-omo';\r\n    \r\n    await mongoose.connect(mongoUri);\r\n    console.log('âœ… Connected to MongoDB');\r\n\r\n    // Check if admin exists\r\n    const adminEmail = 'admin@omobank.com';\r\n    const existingAdmin = await User.findOne({ email: adminEmail });\r\n\r\n    if (existingAdmin) {\r\n      console.log('âš ï¸ Admin user already exists');\r\n      return;\r\n    }\r\n\r\n    // Create new admin user\r\n    // NOTE: If your User model does not have a pre-save hook to hash passwords,\r\n    // you should hash this password using bcrypt before saving.\r\n    const newAdmin = new User({\r\n      fullName: 'Admin',\r\n      email: adminEmail,\r\n      username: 'admin',\r\n      password: 'admin', // Change this in production!\r\n      role: 'admin',\r\n      phoneNumber: '+251911000001',\r\n      accountNumber: 'ADMIN_ACC_001', // Placeholder to satisfy unique constraints\r\n      kycStatus: 'VERIFIED'\r\n    });\r\n\r\n    await newAdmin.save();\r\n    console.log('ğŸš€ Admin user created successfully');\r\n    console.log(`ğŸ‘‰ Email: ${adminEmail}`);\r\n    console.log(`ğŸ‘‰ Password: admin`);\r\n\r\n  } catch (error) {\r\n    console.error('âŒ Error seeding admin:', error);\r\n  } finally {\r\n    await mongoose.disconnect();\r\n    console.log('ğŸ”Œ Disconnected from MongoDB');\r\n    process.exit(0);\r\n  }\r\n};\r\n\r\nseedAdmin();"]}